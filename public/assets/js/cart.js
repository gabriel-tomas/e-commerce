(()=>{"use strict";function t(t,e){if("string"!=typeof t)throw"Key must be string";if(t.length<3)throw"Key must be greater than 2";e=JSON.stringify(e),localStorage.setItem(t,e)}function e(t){if("string"!=typeof t)throw"Key must be string";if(t.length<3)throw"Key must be greater than 2";var e=localStorage.getItem(t);return JSON.parse(e)}function n(t){if("string"!=typeof t)throw"Key must be string";localStorage.removeItem(t)}function r(){null===e("cart-items")?(document.querySelector("section.cart").style.display="none",document.querySelector("section.empty-cart").style.display="block"):document.querySelector("section.empty-cart").style.display="none"}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return e={},t.forEach((function(n){var r,o,a,c,u=(r=n,o=function(t){if(Array.isArray(t))return i(t)}(c=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=0,o.forEach((function(t){t===r&&a++})),a);t.forEach((function(e){delete t[t.indexOf(n)]})),e[n]=u})),e;var e}function a(){var t,n=[];try{t=(t=e("cart-items").split(",")).map((function(t){n.push(t.trim())}))}catch(r){t=e("cart-items"),n.push(t)}return n}function c(){}r(),c.prototype.setInitial=function(t){this.basePrice=t,Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,get:function(){return String(this.basePrice.toFixed(2)).replace(".",",")}}),Object.defineProperty(this,"inCash",{enumerable:!0,configurable:!1,get:function(){return String((this.basePrice-.15*this.basePrice).toFixed(2)).replace(".",",")}}),Object.defineProperty(this,"cardInstallments12",{enumerable:!0,configurable:!1,get:function(){return String((this.basePrice/12).toFixed(2))}})},c.prototype.updateSummary=function(){document.querySelector(".total-price > span").innerText="$ ".concat(this.total),document.querySelector(".price-incash").innerText="$ ".concat(this.inCash),document.querySelector(".price-card").innerText="$ ".concat(this.total),document.querySelector(".container-card > p > span").innerText="$ ".concat(this.cardInstallments12)},c.prototype.updateTotal=function(t,e){"remove"===t&&(this.basePrice-=e),"add"===t&&(this.basePrice+=e),"clearAll"===t&&(this.basePrice=0)};const u=new c;function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(i)?i:String(i)),r)}var i}var d=function(){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.thumbnail=t.thumbnail,this.title=t.title,this.price=t.price,this.discountPercentage=t.discountPercentage,this.id=t.id}var i,o,a;return i=r,a=[{key:"addCartItemLclStrg",value:function(){var n;null!==(n=e("cart-items"))?t("cart-items","".concat(n,", ").concat(this.id)):t("cart-items",this.id)}},{key:"deleteCartItemLclStrg",value:function(){var r,i=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!==(r=e("cart-items"))&&(r=(r=r.split(",")).map((function(t){return t.trim()})),o?r=r.filter((function(t,e){if(Number(t)!==i.id)return console.log(t),!0})):r.splice(r.indexOf(String(this.id)),1),(r=r.join(", "))?t("cart-items","".concat(r)):n("cart-items"))}}],(o=[{key:"create",value:function(){var t=this.divParent,e=this.addToCartButton,n=this.containerAndThumb,r=this.bottomInfos;return t.appendChild(e),t.querySelector(".product-link").appendChild(n),t.querySelector(".product-link").appendChild(r),t}},{key:"divParent",get:function(){var t=document.createElement("div");t.setAttribute("product-id",this.id),t.classList.add("container-product");var e=document.createElement("a");return e.classList.add("product-link"),e.setAttribute("href","product?id=".concat(this.id)),t.append(e),t}},{key:"addToCartButton",get:function(){var t=this,e=document.createElement("button");e.classList.add("btn-add-to-cart");var n=document.createElement("span");return n.classList.add("material-symbols-outlined","font-size-md"),n.innerText="add_shopping_cart",e.appendChild(n),e.addEventListener("click",(function(){r.addCartItemLclStrg.bind(t)()})),e}},{key:"containerAndThumb",get:function(){var t=document.createElement("div");t.classList.add("container-thumbnail");var e=document.createElement("img");return e.setAttribute("src",this.thumbnail),t.appendChild(e),t}},{key:"bottomInfos",get:function(){var t=document.createElement("div");t.classList.add("container-bottom-infos");var e=document.createElement("div");e.classList.add("container-title");var n=document.createElement("span");n.classList.add("normal-font","font-size-base"),n.innerText=this.title,e.appendChild(n);var r=document.createElement("div");r.classList.add("container-price-and-others");var i=document.createElement("span");i.classList.add("span-price","normal-font","font-size-md"),i.innerText="$ ".concat(this.price);var o=document.createElement("span");return o.classList.add("discount","normal-font"),o.innerText="".concat(this.discountPercentage,"% OFF"),r.appendChild(i),r.appendChild(o),t.appendChild(e),t.appendChild(r),t}}])&&s(i.prototype,o),a&&s(i,a),Object.defineProperty(i,"prototype",{writable:!1}),r}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(i)?i:String(i)),r)}var i}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(c,t);var e,n,i,o,a=(i=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(i);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,t)).brand=t.brand,e.quantity=n,e.totalPrice=e.price*e.quantity,e.parentCartProduct=null,e}return e=c,n=[{key:"create",value:function(){this.parentCartProduct=this.divTableParent;var t=this.trAndThs,e=this.trAndTds;this.parentCartProduct.querySelector("table").appendChild(t),this.parentCartProduct.querySelector("table").appendChild(e),this.addToParent(this.parentCartProduct)}},{key:"addToParent",value:function(t){document.querySelector(".items-cart").appendChild(t)}},{key:"divTableParent",get:function(){var t=document.createElement("div");t.classList.add("item-cart"),t.setAttribute("product-id",this.id);var e=document.createElement("table");return e.classList.add("table-product"),t.appendChild(e),t}},{key:"trAndThs",get:function(){var t=document.createElement("tr");t.classList.add("row-headers");for(var e=["Product","Quantity","Price"],n=0;n<3;n++){var r=document.createElement("th");r.classList.add("font-size-sm","font-wght-700"),r.innerText=e[n],t.appendChild(r)}return t}},{key:"trAndTds",get:function(){var t=this,e=document.createElement("tr");e.classList.add("row-datas");var n=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("add"===e)d.addCartItemLclStrg.bind(t)(),u.updateTotal("add",t.price),u.updateSummary();else if("remove"===e){if(d.deleteCartItemLclStrg.bind(t)(n),console.log(t.totalPrice),n){r();var i=t.totalPrice}else i=t.price;u.updateTotal("remove",i),u.updateSummary()}};return e.appendChild(function(){var e=document.createElement("td");e.classList.add("td-product");var n=document.createElement("div");n.classList.add("divImg");var r=document.createElement("img");r.setAttribute("src",t.thumbnail),n.appendChild(r);var i=document.createElement("div");i.classList.add("div-title");var o=document.createElement("h3");o.classList.add("font-normal","font-size-base","font-wght-700"),o.innerText=t.title,i.appendChild(o);var a=document.createElement("div");a.classList.add("div-brand");var c=document.createElement("span");return c.classList.add("font-normal","font-size-base"),c.innerText=t.brand,a.appendChild(c),e.appendChild(n),e.appendChild(i),e.appendChild(a),e}()),e.appendChild(function(){var e=function(){c.innerText=this.quantity}.bind(t),r=function(){this.tagPTotal.innerText="Total: $ ".concat(this.totalPrice)}.bind(t),i=function(){this.spanTimes.innerText="".concat(this.quantity,"x")}.bind(t),o=document.createElement("td");o.classList.add("td-quantity");var a=document.createElement("button");a.classList.add("btn-minus-product","font-size-base"),a.innerText="-";var c=document.createElement("span");c.classList.add("span-quantity","font-size-base"),e();var u=document.createElement("button");u.classList.add("btn-plus-product","font-size-base"),u.innerText="+";var l=function(t){if("add"===t)this.quantity>0&&(a.style.pointerEvents="all"),this.quantity++,this.totalPrice=this.price*this.quantity,r(),e(),i(),n("add");else if("remove"===t){if(this.quantity<=1)return void(a.style.pointerEvents="none");this.quantity--,this.totalPrice=this.price*this.quantity,r(),e(),i(),n("remove")}}.bind(t);return a.addEventListener("click",(function(){l("remove")})),u.addEventListener("click",(function(){l("add")})),o.appendChild(a),o.appendChild(c),o.appendChild(u),o}()),e.appendChild(function(){var e=document.createElement("td");e.classList.add("td-price");var n=document.createElement("p");return n.classList.add("font-size-base"),t.spanTimes=document.createElement("span"),t.spanTimes.innerText="".concat(t.quantity,"x"),n.innerText+=" $ ".concat(t.price),n.insertAdjacentElement("afterbegin",t.spanTimes),t.tagPTotal=document.createElement("p"),t.tagPTotal.classList.add("p-total","font-size-base"),t.tagPTotal.innerText="Total: $ ".concat(t.totalPrice),e.appendChild(n),e.appendChild(t.tagPTotal),e}()),e.appendChild(function(){var e=document.createElement("button");e.classList.add("delete-item-btn");var r=document.createElement("span");return r.classList.add("material-symbols-outlined","font-wght-300"),r.innerText="delete_forever",e.appendChild(r),e.addEventListener("click",(function(){t.parentCartProduct.remove(),n("remove",!0)})),e}()),e}}],n&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(d);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(i)?i:String(i)),r)}var i}const g=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"mainRoute",{enumerable:!0,writable:!1,configurable:!1,value:"https://dummyjson.com"}),Object.defineProperty(this,"allProductsRoute",{enumerable:!0,writable:!1,configurable:!1,value:"".concat(this.mainRoute,"/products")});var e=null;Object.defineProperty(this,"setSearchRoute",{get:function(){return e},set:function(t){"string"==typeof t&&t&&(e="".concat(this.mainRoute,"/products/search?q=").concat(t))}});var n=null;Object.defineProperty(this,"setSingleRoute",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){"string"==typeof t&&t&&(n="".concat(this.mainRoute,"/products/").concat(t))}}),Object.defineProperty(this,"allCategoriesRoute",{enumerable:!0,writable:!1,configurable:!1,value:"".concat(this.mainRoute,"/products/categories")});var r=null;Object.defineProperty(this,"setCategoryRoute",{get:function(){return r},set:function(t){"string"==typeof t&&t&&(r="".concat(this.mainRoute,"/products/category/").concat(t))}});var i=null;Object.defineProperty(this,"setCommentsRoute",{get:function(){return i},set:function(t){"string"==typeof t&&t&&(i="".concat(this.mainRoute,"/comments?limit=").concat(t))}})}var e,n,r;return e=t,n=[{key:"getAllProducts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2?arguments[2]:void 0;t.fetchRoute("".concat(this.allProductsRoute,"?skip=").concat(e,"&limit=").concat(n),r)}},{key:"setSearchProducts",value:function(e,n){this.setSearchRoute=e,t.fetchRoute(this.setSearchRoute,n)}},{key:"getAllCategories",value:function(e){t.fetchRoute(this.allCategoriesRoute,e)}},{key:"setCategoryProducts",value:function(e,n){this.setCategoryRoute=e,t.fetchRoute(this.setCategoryRoute,n)}},{key:"getSingleProduct",value:function(e,n){this.setSingleRoute=e,t.fetchRoute(this.setSingleRoute,n)}},{key:"getComments",value:function(e,n){this.setCommentsRoute=e,t.fetchRoute(this.setCommentsRoute,n)}}],r=[{key:"fetchRoute",value:function(t,e){try{fetch(t).then((function(t){t.json().then((function(t){e&&e(t)}))}))}catch(t){throw new Error(t)}}}],n&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var P;function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}P=o(a()),"null"!==Object.keys(P)[0]&&function(t){for(var e=0,n=0,r=function(){var t,r,a=(t=o[i],r=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,r)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],l=a[1];g.getSingleProduct(c,(function(t){var r;r=l>1?new h(t,l):new h(t),n+=Number(r.totalPrice),Object.keys(P).length-1===e&&(u.setInitial(n),u.updateSummary()),e++}))},i=0,o=Object.entries(t);i<o.length;i++)r()}(P),function(){var t=o(a());"null"!==Object.keys(t)[0]&&function(t){for(var e=function(){var t,e,i=(t=r[n],e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];g.getSingleProduct(o,(function(t){a>1?new h(t,a).create():new h(t).create()}))},n=0,r=Object.entries(t);n<r.length;n++)e()}(t)}(),document.querySelector(".clean-cart").addEventListener("click",(function(){document.querySelectorAll(".items-cart > .item-cart").forEach((function(t){t.remove()})),n("cart-items"),u.updateTotal("clearAll"),u.updateSummary(),r()}))})();
//# sourceMappingURL=cart.js.map